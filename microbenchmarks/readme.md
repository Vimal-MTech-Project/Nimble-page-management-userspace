## Microbenchmarks

### File/Directory information

* `concurrent_page_migration`: This directory contains the programs and scripts used to measure the performance of the concurrent page migration optimization
* `exchange_page_migration`: This directory stores results, programs, and scripts related to exchange page migration optimization
* `thp_page_migration_and_parallel`: This directory contains results and programs related to Linux's default policy(named split THP in this context) and Nimble's 2MB native page migration optimization
* `extract_data_to_csv.py`: From result files generated by microbenchmarks in different folders, this script generates a single CSV file containing all the results.
* `run_all.sh`: This is the starting point of microbenchmarks. You need to change the values of a few variables to adapt this script for your setup. Note that you need to run this script with root privileges.
  * The script runs the microbenchmarks for various configurations like "DRAM to DRAM", "PMEM to DRAM", etc.
  * We only focus on the 2MB page migration, so results for 4KB page migration may not be valid, or the script may not even consider running microbenchmarks for them.
  * The result for each page migration mechanism gets stored in `stats_2mb` sub-directory under the corresponding folder. The parameter of the benchmarks like page count, thread count, and source and destination memory type should be clear from the result file name.
  * There are exactly five variables in `run_all.sh` that you need to configure which are as follow: 
    * `DRAM_NODE_1`
    * `DRAM_NODE_2`
    * `PMEM_NODE_1`
    * `PMEM_NODE_2`
    * `PMU_TOOLS_DIR`
    The information about semantic of these variables would be clear from code comments.

**[This](https://normal.zone/blog/2019-01-27-nimble-page-management/#user-application-launcher) article should provide additional information about the scripts usage**